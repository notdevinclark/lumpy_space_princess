#!/usr/bin/env ruby

require 'sounder'
require 'lumpy_space_princess'

sounds = {
  'these lumps' => 'these_lumps'
}

sound_files = {}
sounds.each do |name, file|
  sound_files[name] = File.expand_path("../../lib/support/#{file}.m4a", __FILE__)
end

lsp = Sounder::SoundGroup.new sound_files

usage = lsp.usage.map do |line|
  "  #{line}"
end
usage = ["lsp version #{LumpySpacePrincess::VERSION}","Usage:"] + usage
usage = usage.join "\n"

if ARGV.size == 1 && ARGV[0] == 'random'
  lsp.random
elsif ARGV.size >= 1 && ARGV[0] != '-h' && ARGV[0] != 'help' && ARGV[0] != '--help'
  begin
    lsp.play ARGV.join ' '
  rescue Sounder::UnknownSoundError
    puts "Error: \"#{ARGV.join ' '}\" does not match a known sound"
    puts usage
  end
else
  puts usage
end
